(window.webpackJsonp=window.webpackJsonp||[]).push([[30,5,6,8],{517:function(t,e,n){var content=n(522);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("5074118b",content,!0,{sourceMap:!1})},518:function(t,e,n){"use strict";n.r(e);n(9),n(10),n(12),n(4),n(16),n(11),n(17);var o=n(1),r=n(102),c=n(529),l=n.n(c);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v={name:"FloatButtonGroup",components:{SearchTool:n(108).default},props:{appUrl:{type:String,default:"https://qianxun666.com/download"},shareUrl:{type:String,default:void 0},search:{type:Boolean,default:!1}},data:function(){return{fab:!1,appQR:"",fabShare:!1,shareQR:""}},computed:m(m({},Object(r.b)(["footer","content"])),{},{right:function(){var t=this.content.left+this.content.width+90,e=document.documentElement.clientWidth-t;return e>0?e:0}}),watch:{appUrl:function(t){this.calcAppQR()},shareUrl:function(t){this.calcShareQR()}},created:function(){},mounted:function(){this.calcAppQR(),this.calcShareQR()},methods:{calcAppQR:function(){var t=this;this.appUrl&&l.a.toDataURL(this.appUrl).then((function(e){t.appQR=e})).catch((function(t){console.error(t)}))},calcShareQR:function(){var t=this;this.shareUrl&&l.a.toDataURL(this.shareUrl).then((function(e){t.shareQR=e})).catch((function(t){console.error(t)}))}}},f=(n(521),n(32)),h=n(58),_=n.n(h),y=n(221),x=n(512),k=n(223),w=n(219),C=n(516),S=n(64),T=n(539),component=Object(f.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{style:{right:t.right+"px",bottom:"100px"},attrs:{id:"group"}},[t._t("prepend"),t._v(" "),t.shareUrl?n("div",[n("v-speed-dial",{attrs:{direction:"left","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-btn",{attrs:{fab:"",dark:"",large:"",color:"blue darken-2"},model:{value:t.fabShare,callback:function(e){t.fabShare=e},expression:"fabShare"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n            mdi-share-variant\n          ")])],1)]},proxy:!0}],null,!1,2522381705),model:{value:t.fabShare,callback:function(e){t.fabShare=e},expression:"fabShare"}},[t._v(" "),n("v-card",[n("v-avatar",{attrs:{size:"180",tile:"",color:"grey"}},[n("img",{attrs:{alt:"分享",src:t.shareQR}})]),t._v(" "),n("div",{staticClass:"tips mt-n2"},[t._v("\n          扫描播放或下载App\n        ")])],1)],1)],1):t._e(),t._v(" "),t.shareUrl?t._e():n("div",[n("v-speed-dial",{attrs:{direction:"left","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-btn",{attrs:{fab:"",dark:"",large:"",color:"blue darken-2"},model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[n("v-icon",{attrs:{dark:""}},[t._v("\n            mdi-android\n          ")])],1)]},proxy:!0}],null,!1,3319218952),model:{value:t.fab,callback:function(e){t.fab=e},expression:"fab"}},[t._v(" "),n("v-card",[n("v-avatar",{attrs:{size:"150",tile:"",color:"grey"}},[n("img",{attrs:{alt:"APP 下载",src:t.appQR}})]),t._v(" "),n("div",{staticClass:"tips mt-n2"},[t._v("\n          扫码下载App\n        ")])],1)],1)],1),t._v(" "),t.search?n("div",[n("v-menu",{attrs:{"offset-x":"",transition:"slide-x-transition","nudge-left":"8",left:"","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{fab:"",dark:"",large:"",color:"blue darken-2"}},"v-btn",r,!1),o),[n("v-icon",{attrs:{dark:""}},[t._v("\n            mdi-magnify\n          ")])],1)]}}],null,!1,1942183284)},[t._v(" "),n("v-sheet",{attrs:{elevation:"1",width:"300"}},[n("search-tool",{attrs:{small:"",height:30}})],1)],1)],1):t._e(),t._v(" "),n("div",[n("v-btn",{attrs:{fab:"",dark:"",large:"",color:"purple"},on:{click:function(e){return t.$vuetify.goTo(0,{duration:300})}}},[n("v-icon",{attrs:{dark:""}},[t._v("\n        mdi-chevron-up\n      ")])],1)],1),t._v(" "),t._t("append")],2)}),[],!1,null,"49e6b04c",null);e.default=component.exports;_()(component,{SearchTool:n(108).default}),_()(component,{VAvatar:y.a,VBtn:x.a,VCard:k.a,VIcon:w.a,VMenu:C.a,VSheet:S.a,VSpeedDial:T.a})},521:function(t,e,n){"use strict";n(517)},522:function(t,e,n){var o=n(13)(!1);o.push([t.i,"#group[data-v-49e6b04c]{position:fixed;z-index:10}#group div[data-v-49e6b04c]{margin:8px 0}.tips[data-v-49e6b04c]{width:100%;text-align:center}",""]),t.exports=o},532:function(t,e,n){var content=n(548);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("2fdd6e7c",content,!0,{sourceMap:!1})},543:function(t,e,n){"use strict";e.a={emotionList:["微笑","撇嘴","色","发呆","得意","流泪","害羞","闭嘴","睡","大哭","尴尬","发怒","调皮","呲牙","惊讶","难过","酷","冷汗","抓狂","吐","偷笑","可爱","白眼","傲慢","饥饿","困","惊恐","流汗","憨笑","大兵","奋斗","咒骂","疑问","嘘","晕","折磨","衰","骷髅","敲打","再见","擦汗","抠鼻","鼓掌","糗大了","坏笑","左哼哼","右哼哼","哈欠","鄙视","委屈","快哭了","阴险","亲亲","吓","可怜","菜刀","西瓜","啤酒","篮球","乒乓","咖啡","饭","猪头","玫瑰","凋谢","示爱","爱心","心碎","蛋糕","闪电","炸弹","刀","足球","瓢虫","便便","月亮","太阳","礼物","拥抱","强","弱","握手","胜利","抱拳","勾引","拳头","差劲","爱你","不","好","爱情","飞吻","跳跳","发抖","怄火","转圈","磕头","回头","跳绳","挥手","激动","街舞","献吻","左太极","右太极"]}},544:function(t,e,n){"use strict";n.r(e);n(147),n(538);var o={name:"MusicPlayer",props:{singerName:{type:String,default:""},songName:{type:String,default:""},singerPic:{type:String,default:""},src:{type:String,default:""},autoplay:{type:Boolean,default:!1},mobile:{type:Boolean,default:!1}},data:function(){return{volume:100,muted:!1,playing:this.autoplay,sliderTime:0,maxTime:0,mousedown:!1,repeat:!0}},computed:{icon:function(){var t=this.volume;return this.muted||t<=0?"mdi-volume-mute":t<=35?"mdi-volume-low":t>70?"mdi-volume-high":"mdi-volume-medium"},playIcon:function(){return this.playing?"mdi-pause":"mdi-play"},repeatIcon:function(){return this.repeat?"mdi-repeat":"mdi-repeat-off"}},watch:{volume:function(t){this.muted=!1;var e=t;return t<0?e=0:t>100&&(e=100),this.$refs.audio.volume=e/100,localStorage.setItem("audioVolume",e),e},muted:function(t){localStorage.setItem("audioMuted",t),this.$refs.audio.muted=t}},created:function(){},mounted:function(){var t=this,e=localStorage.getItem("audioVolume");null==e||""===e||isNaN(e)||(this.volume=parseInt(e)),this.$nextTick((function(){var e=localStorage.getItem("audioMuted");t.muted="true"===e}))},methods:{scrollBarWheel:function(t){((t=t||window.event).wheelDelta?t.wheelDelta<0:t.detail>0)?this.volume-=5:this.volume+=5},paly:function(){this.playing?this.$refs.audio.pause():this.$refs.audio.play()},onPlay:function(t){this.playing=!0,this.$refs.audio&&this.$emit("playing",this.$refs.audio.currentTime)},onPause:function(t){this.playing=!1,this.$refs.audio&&this.$emit("paused",this.$refs.audio.currentTime)},OnEnded:function(t){this.playing=!1},onError:function(t){console.log(t)},onWaiting:function(t){},onTimeupdate:function(t){if(!this.mousedown){var e=this.sliderTime;this.sliderTime=parseInt(t.target.currentTime),e>this.sliderTime&&this.$emit("seeked",this.$refs.audio.currentTime)}},onLoadedmetadata:function(t){this.maxTime=parseInt(t.target.duration),this.sliderTime=parseInt(t.target.currentTime)},fmtTime:function(time){return"".concat(parseInt(time/60),":")+(""+time%60).padStart(2,0)},setTime:function(){this.mousedown=!1,this.$refs.audio.currentTime=this.sliderTime,this.$refs.audio&&this.$emit("seeked",this.$refs.audio.currentTime)}}},r=(n(547),n(32)),c=n(58),l=n.n(c),d=n(221),m=n(512),v=n(219),f=n(516),h=n(639),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("div",{staticClass:"float-left ma-2"},[n("v-avatar",{attrs:{tile:"",size:"64"}},[n("img",{attrs:{alt:t.singerName,src:t.singerPic}})]),t._v(" "),t.mobile?t._e():n("v-btn",{staticClass:"mx-2",attrs:{fab:"",icon:"",color:"white"},on:{click:t.paly}},[n("v-icon",{attrs:{dark:""}},[t._v("\n        "+t._s(t.playIcon)+"\n      ")])],1),t._v(" "),t.mobile?t._e():n("v-btn",{staticClass:"mx-2",attrs:{fab:"",icon:"",color:"white"},on:{click:function(e){t.repeat=!t.repeat}}},[n("v-icon",{attrs:{dark:""}},[t._v("\n        "+t._s(t.repeatIcon)+"\n      ")])],1)],1),t._v(" "),t.mobile?t._e():n("div",{staticClass:"vol float-right mr-10",on:{wheel:function(e){return e.preventDefault(),t.scrollBarWheel.apply(null,arguments)}}},[n("v-menu",{attrs:{"open-on-hover":"",top:"","offset-y":"","nudge-top":"3"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",color:"white"},on:{click:function(e){t.muted=!t.muted}}},"v-btn",r,!1),o),[n("v-icon",{attrs:{dark:""}},[t._v(t._s(t.icon))])],1),t._v(" "),n("span",[t._v(t._s(t.volume)+"%")])]}}],null,!1,3070573750)},[t._v(" "),n("div",{staticClass:"slider",on:{wheel:function(e){return e.preventDefault(),t.scrollBarWheel.apply(null,arguments)}}},[n("v-slider",{staticClass:"audio-slider",attrs:{vertical:""},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1)])],1),t._v(" "),t.mobile?n("div",{staticClass:"info"},[n("span",[t._v(t._s(t.singerName)+" - "+t._s(t.songName))])]):t._e(),t._v(" "),n("div",{staticClass:"time-slider"},[n("div",{staticClass:"mt-2"},[t.mobile?t._e():n("span",[t._v(t._s(t.songName))]),t._v(" "),t.mobile?n("v-btn",{staticClass:"ml-4",attrs:{fab:"",icon:"",color:"white"},on:{click:t.paly}},[n("v-icon",{attrs:{dark:""}},[t._v("\n          "+t._s(t.playIcon)+"\n        ")])],1):t._e(),t._v(" "),n("span",{staticClass:"float-right mr-5 mt-5"},[t._v(t._s(t.fmtTime(t.sliderTime))+"/"+t._s(t.fmtTime(t.maxTime)))])],1),t._v(" "),t.mobile?t._e():n("div",[n("v-slider",{attrs:{max:t.maxTime},on:{mousedown:function(e){t.mousedown=!0},mouseup:t.setTime},model:{value:t.sliderTime,callback:function(e){t.sliderTime=e},expression:"sliderTime"}})],1)]),t._v(" "),t.mobile?n("div",{staticClass:"mx-5 mt-2"},[n("v-slider",{attrs:{max:t.maxTime},on:{mousedown:function(e){t.mousedown=!0},mouseup:t.setTime},model:{value:t.sliderTime,callback:function(e){t.sliderTime=e},expression:"sliderTime"}})],1):t._e(),t._v(" "),n("audio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"audio",attrs:{src:t.src,autoplay:t.autoplay,loop:t.repeat,preload:"auto"},on:{play:t.onPlay,error:t.onError,waiting:t.onWaiting,pause:t.onPause,timeupdate:t.onTimeupdate,loadedmetadata:t.onLoadedmetadata,ended:t.OnEnded}})])}),[],!1,null,"f25f056a",null);e.default=component.exports;l()(component,{VAvatar:d.a,VBtn:m.a,VIcon:v.a,VMenu:f.a,VSlider:h.a})},547:function(t,e,n){"use strict";n(532)},548:function(t,e,n){var o=n(13)(!1);o.push([t.i,'.vol[data-v-f25f056a]{width:36px}.slider[data-v-f25f056a]{background-color:rgba(0,0,0,.9)}.audio-slider[data-v-f25f056a]{height:200px;scrollbar-width:none;-ms-overflow-style:none;overflow-x:hidden;overflow-y:auto}.audio-slider[data-v-f25f056a]::-webkit-scrollbar{display:none}.info[data-v-f25f056a]{padding:5px;min-height:80px}img[data-v-f25f056a]:after{content:" ";display:block;position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;background:url(https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/%E5%9B%BA%E5%AE%9A2.jpg);background-size:100% 100%}',""]),t.exports=o},549:function(t,e,n){var content=n(560);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("5910bed8",content,!0,{sourceMap:!1})},559:function(t,e,n){"use strict";n(549)},560:function(t,e,n){var o=n(13)(!1);o.push([t.i,".box[data-v-0810caef]{width:300px;max-height:150px;overflow-y:auto;background-color:#fff;padding-top:2px}.box .emo[data-v-0810caef]{margin:2px;cursor:pointer}",""]),t.exports=o},561:function(t,e,n){"use strict";n.r(e);n(70),n(27);var o=n(543),r={name:"EmoticonBox",props:{},data:function(){return{show:!1,emotionArr:null}},watch:{show:function(t){t&&null==this.emotionArr&&this.loadEmotion(),this.$emit("iconClick",t)}},created:function(){},mounted:function(){},methods:{emoClick:function(t){this.$emit("emotionClick",t)},loadEmotion:function(){var t=o.a.emotionList,e=[];t.map((function(t,n){e.push({name:"[".concat(t,"]"),url:'<img title="'.concat(t,'" src="https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/').concat(n,'.gif">')})})),this.emotionArr=e,this.load=!0,console.log("表情盒子加载完成")}}},c=(n(559),n(32)),l=n(58),d=n.n(l),m=n(512),v=n(219),f=n(516),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-left":"300","nudge-top":"50"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"grey",dark:"",icon:"",left:"","offset-x":"","offset-overflow":""}},"v-btn",r,!1),o),[n("v-icon",[t._v("mdi-emoticon-happy-outline")])],1)]}}]),model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._v(" "),n("div",{staticClass:"box"},t._l(t.emotionArr,(function(line,i){return n("span",{key:"emojo"+i,staticClass:"emo",domProps:{innerHTML:t._s(line.url)},on:{click:function(e){return e.stopPropagation(),t.emoClick(line.name)}}})})),0)])}),[],!1,null,"0810caef",null);e.default=component.exports;d()(component,{VBtn:m.a,VIcon:v.a,VMenu:f.a})},562:function(t,e,n){"use strict";n.r(e);n(24),n(67);var o=n(543),r={name:"EmoticonTextarea",props:{content:{type:String,default:""}},data:function(){return{}},computed:{html:function(){return this.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\r?\n/g,"<br>").replace(/\s/g,"&nbsp;").replace(/\\/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/\[[\u4E00-\u9FA5]{1,3}\]/gi,(function(t){var e=t.replace(/\[|\]/gi,"");console.log(e);var n=o.a.emotionList.indexOf(e);return-1!==n?'<img src="https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/'.concat(n,'.gif">'):t}))}},created:function(){},mounted:function(){},methods:{}},c=n(32),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"d-flex align-center",domProps:{innerHTML:t._s(t.html)}})}),[],!1,null,"68b4ea30",null);e.default=component.exports},579:function(t,e,n){var content=n(634);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("24338764",content,!0,{sourceMap:!1})},630:function(t,e,n){t.exports=n.p+"img/o_img_wechat.1b32a01.png"},631:function(t,e,n){t.exports=n.p+"img/o_img_xlwb.d63e81b.png"},633:function(t,e,n){"use strict";n(579)},634:function(t,e,n){var o=n(13)(!1);o.push([t.i,'.player[data-v-5ccd4b7f]{position:fixed;right:0;left:0;z-index:9;bottom:0;color:#fff;background-color:rgba(0,0,0,.9)}.lyric[data-v-5ccd4b7f]{overflow-y:auto;text-align:center;margin-right:2rem;height:300px;margin-left:290px;color:grey}.lyric .none[data-v-5ccd4b7f]{height:250px;width:100%}.lyric .current[data-v-5ccd4b7f]{color:#e74b3b}#comment[data-v-5ccd4b7f]{margin-left:310px;margin-right:2rem}.text[data-v-5ccd4b7f]{vertical-align:middle}.share[data-v-5ccd4b7f]{cursor:pointer}img[data-v-5ccd4b7f]:after{content:" ";display:block;position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;background:url(https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/%E5%9B%BA%E5%AE%9A2.jpg);background-size:100% 100%}',""]),t.exports=o},659:function(t,e,n){"use strict";n.r(e);var o=n(63),r=(n(24),n(68),n(72),n(27),n(70),n(46),n(37),n(45),n(21),n(529)),c=n.n(r),l=n(632),d=n.n(l),m=n(544),v=n(518),f=n(561),h=n(562),_={components:{MusicPlayer:m.default,FloatButtonGroup:v.default,EmoticonBox:f.default,EmoticonTextarea:h.default},validate:function(t){var e=t.params;return/^\d+$/.test(e.id)},asyncData:function(t){var e=t.params;return t.$axios.post("/getSongDetail",{songId:parseInt(e.id)}).then((function(data){return data.lyrics=data.lyric.trim().split("\n"),data}))},data:function(){return{listenUrl:void 0,comments:[],comment:"",loading:!1,lastFreshTime:0,snackbar:!1,download:void 0,overlay:!1,sending:!1,sendSnackbar:!1,msg:"",commentCount:0,singerId:void 0,downloadTimes:0,shareDialog:!1,weixinShare:!1,shareQR:"",currLyric:null,currentLineNum:0}},computed:{lyricStyle:function(){return{"border-color":this.$vuetify.theme.isDark?this.$vuetify.theme.themes.dark.primary:this.$vuetify.theme.themes.light.primary}},singerImg:function(){var t=(this.singerName||"").split("、"),e=this.pic;return t.length>2||0===t.length?"https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/固定2.jpg":e?"https://cdn.jsdelivr.net/gh/qianxun666/".concat(e,"@master/").concat(t[0].trim(),"2.jpg"):"https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/".concat(t[0].trim(),"2.jpg")},shareUrl:function(){return"".concat(window.location.origin,"/share/").concat(this.songId)}},watch:{shareDialog:function(t){this.weixinShare=!1}},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll,{passive:!0})},created:function(){if(this.lyrics&&this.lyrics.length>0&&(/^\[(ti|ar|al|by):(.*)\]$/.test(this.lyrics[0])||/^\[(\d{2}):(\d{2}).(\d{2})\](.*)/.test(this.lyrics[0]))){this.currLyric=new d.a(this.lyric,this.handleLyric);var t=this.currLyric.lines.map((function(t){return t.txt}));t.length-this.lyrics.length>-5&&(this.lyrics=t)}},mounted:function(){var t=this;this.getComments(),window.addEventListener("scroll",this.handleScroll,{passive:!0}),c.a.toDataURL(this.shareUrl).then((function(e){t.shareQR=e})).catch((function(t){console.error(t)}))},methods:{onClickOutside:function(){this.overlay=!1,this.shareDialog=!1},open:function(t,e){t.downloadPass?this.$copyText(t.downloadPass).then((function(e){window.open(t.downloadUrl,"_blank")}),(function(t){alert("自动复制提取码失败，手动复制"),console.log(t)})):window.open(t.downloadUrl,"_blank")},onTextareaChange:function(t){if(t.length>300){var e=t.slice(0,305);/\[[\u4E00-\u9FA5]{1,3}\]/gi.exec(e).length&&(this.comment=t),this.comment=t.slice(0,300)}},sendComment:function(){var t=this;this.comment&&this.comment.trim()&&(this.sending=!0,this.$axios.post("/sendComman",{songId:this.$route.params.id,contentStr:this.comment}).then((function(data){t.comments.unshift({userName:t.$store.getters.name||"游客",contentStr:t.comment,time:"刚刚"}),t.commentCount+=1,t.comment="",t.sending=!1})).catch((function(e){console.log(e),t.sending=!1,t.msg=e.response.data.resMsg,t.sendSnackbar=!0})))},getComments:function(){var t=this;if(!this.loading){var e=(new Date).getTime();e-this.lastFreshTime<1e3||(this.lastFreshTime=e,this.loading=!0,this.$axios.post("/getComman",{songId:parseInt(this.$route.params.id),limit:10,offset:this.comments.length}).then((function(data){var e;(t.commentCount=data.count,0===data.commans.length)?t.snackbar=!0:(e=t.comments).push.apply(e,Object(o.a)(data.commans));t.loading=!1})).catch((function(e){console.log(e),t.loading=!1})))}},handleScroll:function(){if(!this.snackbar){var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,n=document.documentElement.scrollHeight||document.body.scrollHeight;Math.ceil(t+e)>=n&&(window.scrollTo(0,n-1),this.getComments())}},getDownloadUrl:function(t){var e=this;if(this.download)this.overlay=!0;else if(this.$store.getters.ssid||"string"==typeof t)this.$axios.post("/queryAddress",{songId:parseInt(this.$route.params.id),token:t}).then((function(data){e.download=data.adList,e.downloadTimes++,e.overlay=!0})).catch((function(t){console.log(t)}));else{var n=this.$store.getters.uuid;this.$clicaptcha({songId:parseInt(this.$route.params.id),uuid:n,src:"/clicaptcha/",success:"验证成功！",error:"未点中正确区域，请重试！",callback:function(t){setTimeout((function(){e.getDownloadUrl(t)}),100)}})}},play:function(){this.$refs.player.paly()},thumbUp:function(t,i){t.prize?(t.prizeCount--,t.prize=!1):(t.prizeCount++,t.prize=!0)},emotionClick:function(t){var input=this.$refs.commentText.$refs.input;input.focus();var e=input&&Number(input.selectionStart)||0,n=input&&Number(input.selectionEnd)||0;if(e>n){var o=e;e=n,n=o}var r=this.comment.slice(0,e),c=this.comment.slice(n,this.comment.length);this.comment=r+t+c,input&&setTimeout((function(){input.focus();var n=e+t.length;if(input.setSelectionRange)input.setSelectionRange(n,n);else if(input.createTextRange){var o=input.createRange();o.collapse(!0),o.moveEnd("character",n),o.moveStart("character",n),o.select()}}),10)},iconClick:function(t){this.$refs.commentText.$refs.input.focus(),this.$refs.commentText.focus()},shareWeibo:function(){var t="http://v.t.sina.com.cn/share/share.php";t+="?url="+encodeURIComponent(this.shareUrl),t+="&title="+encodeURIComponent("千寻网 - ".concat(this.songName," - ").concat(this.singerName)),t+="&content=utf-8",t+="&pic="+encodeURIComponent(this.singerImg),window.open(t,"_blank")},copyShareUrl:function(){this.$copyText(this.shareUrl).then((function(t){console.log(t)}),(function(t){alert("自动复制提取码失败，手动复制"),console.log(t)}))},handleLyric:function(t){var e=t.lineNum;this.currentLineNum=e;var n=this.$refs.lyrics[e],o=80-n.clientHeight/2,r=this.$refs["lyric-container"];this.$vuetify.goTo(n,{container:r,offset:o})},onPlay:function(){this.currLyric&&this.currLyric.play()},onPause:function(){this.currLyric&&this.currLyric.stop()},onSeek:function(t){this.currLyric&&this.currLyric.seek(1e3*t)},"οnerrοr":function(){console.log(1111111111)}},head:function(){return{title:"千寻网 - ".concat(this.songName," - ").concat(this.singerName),meta:[{name:"referrer",content:"no-referrer"}]}}},y=(n(633),n(32)),x=n(58),k=n.n(x),w=n(221),C=n(512),S=n(223),T=n(78),$=n(508),I=n(509),U=n(219),E=n(224),O=n(222),V=n(506),j=n(551),N=n(556),P=n(511),D=n(623),L=n(298),R=n.n(L),A=n(146),component=Object(y.a)(_,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-card",{attrs:{flat:""}},[o("div",{staticClass:"ma-5 float-left"},[o("nuxt-link",{attrs:{to:t.singerId?"/singer/"+t.singerId+"-1":"#"}},[o("v-avatar",{attrs:{size:"250",tile:"",color:"grey"}},[o("img",{attrs:{alt:t.singerName,src:t.singerImg}})])],1),t._v(" "),o("div",{staticClass:"mx-10 mt-10 mb-3"},[o("v-btn",{attrs:{color:"primary",block:""},on:{click:t.getDownloadUrl}},[t._v("\n          下载地址\n        ")])],1),t._v(" "),o("div",{staticClass:"mx-10 my-3"},[o("v-btn",{attrs:{color:"primary",block:""},on:{click:function(e){t.shareDialog=!0,t.weixinShare=!1}}},[t._v("\n          分享\n        ")]),t._v(" "),o("v-overlay",{attrs:{value:t.shareDialog}},[o("v-card",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],attrs:{width:"500"}},[o("v-card-title",{staticClass:"headline"},[t._v("  "+t._s(t.weixinShare?"微信分享":"分享")+" ")]),t._v(" "),t.weixinShare?o("v-card-text",[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"text-center"},[o("v-avatar",{attrs:{size:"250",tile:"",color:"grey"}},[o("img",{attrs:{alt:"分享",src:t.shareQR}})])],1)],1)],1):o("v-card-text",[o("v-row",{attrs:{align:"center"}},[o("v-col",{staticClass:"text-center"},[o("img",{staticClass:"share",attrs:{src:n(630)},on:{click:function(e){t.weixinShare=!0}}})]),t._v(" "),o("v-col",{staticClass:"text-center"},[o("img",{staticClass:"share",attrs:{src:n(631)},on:{click:t.shareWeibo}})])],1)],1),t._v(" "),t.weixinShare?o("v-card-text",[t._v("\n              请用微信扫描二维码，打开单曲播放页面后，点击微信右上角的更多按钮，分享到好友或朋友圈\n            ")]):o("v-card-text",[o("div",{staticClass:"subtitle-1"},[t._v("分享链接")]),t._v(" "),o("v-card",{staticClass:"d-flex",attrs:{flat:"",tile:""}},[o("span",{ref:"shareUrl"},[t._v(t._s(t.shareUrl))]),t._v(" "),o("v-spacer"),t._v(" "),o("span",{staticClass:"float-right"},[o("v-btn",{attrs:{small:"",outlined:"",rounded:""},on:{click:t.copyShareUrl}},[t._v("复制链接")])],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){t.shareDialog=!1}}},[t._v("\n                关闭\n              ")])],1)],1)],1)],1),t._v(" "),o("v-overlay",{attrs:{value:t.overlay}},[t.download?o("v-card",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}]},[o("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[o("thead",[o("tr",[o("th",{staticClass:"text-left"},[t._v("地址")]),t._v(" "),o("th",{staticClass:"text-left"},[t._v("提取码")]),t._v(" "),o("th",{staticClass:"text-left"})])]),t._v(" "),o("tbody",t._l(t.download,(function(e,i){return o("tr",{key:i},[o("td",[o("a",{attrs:{href:e.downloadUrl,target:"_blank"}},[t._v(t._s(e.downloadUrl))])]),t._v(" "),o("td",[t._v(t._s(e.downloadPass))]),t._v(" "),o("td",[o("v-btn",{attrs:{text:""},on:{click:function(n){return t.open(e,i)}}},[t._v("打开")])],1)])})),0)]},proxy:!0}],null,!1,19505657)}),t._v(" "),o("v-card-subtitle",[t._v("\n            温馨提示: 请直接点击打开,提取码会自动复制\n          ")])],1):t._e()],1)],1),t._v(" "),o("div",{staticClass:"pl-5 pb-10 pt-2"},[o("v-card-title",{staticClass:"headline"},[o("v-icon",{attrs:{color:"red"}},[t._v("mdi-fire")]),t._v(" "+t._s(t.songName)+"\n      ")],1),t._v(" "),o("v-card-title",{staticClass:"subtitle-1 pl-11"},[o("nuxt-link",{attrs:{to:t.singerId?"/singer/"+t.singerId+"-1":"#"}},[t._v("\n          "+t._s(t.singerName)+"\n        ")])],1),t._v(" "),o("div",{staticClass:"d-flex align-start mb-6 py-3 pl-8"},[o("v-btn",{staticClass:"mr-2 ml-3",attrs:{color:"primary"},on:{click:t.play}},[o("v-icon",{staticClass:"mr-2"},[t._v("mdi-play")]),t._v("\n          播放\n        ")],1),t._v(" "),o("v-btn",{staticClass:"mx-2",attrs:{to:null==t.singerId?"":"/singer/"+t.singerId+"-1"}},[o("v-icon",{staticClass:"mr-2"},[t._v("mdi-format-list-bulleted")]),t._v("\n          歌曲列表\n        ")],1),t._v(" "),o("v-btn",{staticClass:"mx-2",on:{click:function(e){return t.$vuetify.goTo("#comment",{duration:300})}}},[o("v-icon",{staticClass:"mr-2"},[t._v("mdi-message-processing-outline")]),t._v("\n          "+t._s(t.commentCount)+"\n        ")],1),t._v(" "),o("v-btn",{staticClass:"mx-2",on:{click:t.getDownloadUrl}},[o("v-icon",{staticClass:"mr-2"},[t._v("mdi-download")]),t._v("\n          "+t._s(t.downloadTimes)+"\n        ")],1)],1),t._v(" "),o("div",{ref:"lyric-container",staticClass:"lyric grey lighten-4 pt-2",style:t.lyricStyle},[t._l(t.lyrics,(function(e,n){return o("p",{key:n,ref:"lyrics",refInFor:!0,class:{current:t.currentLineNum==n}},[t._v("\n          "+t._s(e)+"\n        ")])})),t._v(" "),t.lyrics.length<2?o("div",{staticClass:"none d-flex align-center justify-center"},[t._v("\n          暂无歌词\n        ")]):t._e()],2)],1)]),t._v(" "),o("v-card",{staticClass:"mt-5",attrs:{id:"comment",flat:""}},[o("v-card-title",{staticClass:"headline"},[t._v(" 评论区 ")]),t._v(" "),o("v-divider",{staticClass:"primary main-divider"}),t._v(" "),o("v-card-subtitle",{staticClass:"mt-2"},[o("v-snackbar",{attrs:{color:"error",absolute:"",centered:""},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.attrs;return[o("v-btn",t._b({attrs:{color:"blue",text:""},on:{click:function(e){t.sendSnackbar=!1}}},"v-btn",n,!1),[t._v("\n            关闭\n          ")])]}}]),model:{value:t.sendSnackbar,callback:function(e){t.sendSnackbar=e},expression:"sendSnackbar"}},[t._v("\n        "+t._s(t.msg)+"\n\n        ")]),t._v(" "),o("v-textarea",{ref:"commentText",attrs:{solo:"",outlined:"","auto-grow":"",counter:300,label:"我也说两句"},on:{change:t.onTextareaChange},scopedSlots:t._u([{key:"counter",fn:function(e){var n=e.props,r=n.value,c=n.max;return[o("div",[o("emoticon-box",{on:{emotionClick:t.emotionClick,iconClick:t.iconClick}}),t._v(" "),o("span",{staticClass:"px-2"},[t._v(t._s(r)+" / "+t._s(c))]),t._v(" "),o("v-btn",{staticClass:"mr-0",attrs:{color:"primary",width:"100",large:"",loading:t.sending},on:{click:t.sendComment}},[t._v("发布")])],1)]}}]),model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}})],1),t._v(" "),o("v-card-text",[t._l(t.comments,(function(e,i){return o("v-card",{key:i,staticClass:"ma-2",attrs:{flat:""}},[o("v-divider"),t._v(" "),o("v-card-text",{staticClass:"d-flex align-center text-h6"},[o("span",{staticClass:"light-blue--text accent-4"},[t._v(t._s(e.userName))]),t._v(":  \n          "),t._v(" "),o("emoticon-textarea",{attrs:{content:e.contentStr}})],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("span",{staticClass:"mr-5"},[t._v("\n            "+t._s(e.time)+"\n          ")]),t._v(" "),o("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(n){return t.thumbUp(e,i)}}},[e.prize?o("v-icon",[t._v("mdi-thumb-up")]):o("v-icon",[t._v("mdi-thumb-up-outline")]),t._v(" "),e.prizeCount>1?o("span",{staticClass:"px-2"},[t._v(t._s(e.prizeCount))]):t._e()],1),t._v(" "),o("v-divider",{attrs:{vertical:""}}),t._v(" "),o("v-btn",{attrs:{text:""}},[t._v(" 回复 ")])],1)],1)})),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.snackbar,expression:"snackbar"}],staticClass:"d-flex justify-center my-2"},[t._v("\n        --真的没有了--\n      ")])],2),t._v(" "),o("v-card-actions",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading my-2"},[o("v-progress-linear",{attrs:{indeterminate:"",color:"yellow darken-2"}})],1)],1),t._v(" "),o("client-only",[o("div",{staticClass:"player"},[o("music-player",{ref:"player",attrs:{"song-name":t.songName,"singer-pic":t.singerImg,src:t.listenUrl},on:{playing:t.onPlay,paused:t.onPause,seeked:t.onSeek}})],1),t._v(" "),o("float-button-group",{attrs:{"share-url":t.shareUrl,search:""},scopedSlots:t._u([{key:"append",fn:function(){return[o("div",[o("v-btn",{attrs:{fab:"",dark:"",large:"",color:"success"},on:{click:function(e){return t.$vuetify.goTo("#comment",{duration:300})}}},[o("v-icon",{attrs:{dark:""}},[t._v(" mdi-comment-processing ")])],1)],1)]},proxy:!0}])})],1)],1)}),[],!1,null,"5ccd4b7f",null);e.default=component.exports;k()(component,{EmoticonBox:n(561).default,EmoticonTextarea:n(562).default,MusicPlayer:n(544).default,FloatButtonGroup:n(518).default}),k()(component,{VAvatar:w.a,VBtn:C.a,VCard:S.a,VCardActions:T.a,VCardSubtitle:T.b,VCardText:T.c,VCardTitle:T.d,VCol:$.a,VDivider:I.a,VIcon:U.a,VOverlay:E.a,VProgressLinear:O.a,VRow:V.a,VSimpleTable:j.a,VSnackbar:N.a,VSpacer:P.a,VTextarea:D.a}),R()(component,{ClickOutside:A.a})}}]);