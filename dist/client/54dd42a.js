(window.webpackJsonp=window.webpackJsonp||[]).push([[28,8],{532:function(t,e,n){var content=n(548);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("b4a6befa",content,!0,{sourceMap:!1})},544:function(t,e,n){"use strict";n.r(e);n(147),n(24),n(67),n(538);var o={name:"MusicPlayer",props:{singerName:{type:String,default:""},songName:{type:String,default:""},singerPic:{type:String,default:""},src:{type:String,default:""},autoplay:{type:Boolean,default:!1},mobile:{type:Boolean,default:!1}},data:function(){return{volume:100,muted:!1,playing:this.autoplay,sliderTime:0,maxTime:0,mousedown:!1,repeat:!0}},computed:{icon:function(){var t=this.volume;return this.muted||t<=0?"mdi-volume-mute":t<=35?"mdi-volume-low":t>70?"mdi-volume-high":"mdi-volume-medium"},playIcon:function(){return this.playing?"mdi-pause":"mdi-play"},repeatIcon:function(){return this.repeat?"mdi-repeat":"mdi-repeat-off"},songSrc:function(){return"https:"===location.protocol?this.src.replace(/^http:\/\/audio\.qianxun666\.com/,"https://audio.qianxun666.com"):this.src}},watch:{volume:function(t){this.muted=!1;var e=t;return t<0?e=0:t>100&&(e=100),this.$refs.audio.volume=e/100,localStorage.setItem("audioVolume",e),e},muted:function(t){localStorage.setItem("audioMuted",t),this.$refs.audio.muted=t}},created:function(){},mounted:function(){var t=this,e=localStorage.getItem("audioVolume");null==e||""===e||isNaN(e)||(this.volume=parseInt(e)),this.$nextTick((function(){var e=localStorage.getItem("audioMuted");t.muted="true"===e}))},methods:{scrollBarWheel:function(t){((t=t||window.event).wheelDelta?t.wheelDelta<0:t.detail>0)?this.volume-=5:this.volume+=5},play:function(){this.playing?this.$refs.audio.pause():this.$refs.audio.play()},onPlay:function(t){this.playing=!0,this.$refs.audio&&this.$emit("playing",this.$refs.audio.currentTime)},onPause:function(t){this.playing=!1,this.$refs.audio&&this.$emit("paused",this.$refs.audio.currentTime)},OnEnded:function(t){this.playing=!1},onError:function(t){console.log(t)},onWaiting:function(t){},onTimeupdate:function(t){if(!this.mousedown){var e=this.sliderTime;this.sliderTime=parseInt(t.target.currentTime),e>this.sliderTime&&this.$emit("seeked",this.$refs.audio.currentTime)}},onLoadedmetadata:function(t){this.maxTime=parseInt(t.target.duration),this.sliderTime=parseInt(t.target.currentTime)},fmtTime:function(time){return"".concat(parseInt(time/60),":")+(""+time%60).padStart(2,0)},setTime:function(){this.mousedown=!1,this.$refs.audio.currentTime=this.sliderTime,this.$refs.audio&&this.$emit("seeked",this.$refs.audio.currentTime)},canPlay:function(t){this.$emit("can-play",t)}}},r=(n(547),n(32)),l=n(58),c=n.n(l),d=n(221),m=n(512),f=n(219),v=n(516),h=n(639),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("div",{staticClass:"float-left ma-2"},[n("v-avatar",{attrs:{tile:"",size:"64"}},[n("img",{attrs:{alt:t.singerName,src:t.singerPic}})]),t._v(" "),t.mobile?t._e():n("v-btn",{staticClass:"mx-2",attrs:{fab:"",icon:"",color:"white"},on:{click:t.play}},[n("v-icon",{attrs:{dark:""}},[t._v("\n        "+t._s(t.playIcon)+"\n      ")])],1),t._v(" "),t.mobile?t._e():n("v-btn",{staticClass:"mx-2",attrs:{fab:"",icon:"",color:"white"},on:{click:function(e){t.repeat=!t.repeat}}},[n("v-icon",{attrs:{dark:""}},[t._v("\n        "+t._s(t.repeatIcon)+"\n      ")])],1)],1),t._v(" "),t.mobile?t._e():n("div",{staticClass:"vol float-right mr-10",on:{wheel:function(e){return e.preventDefault(),t.scrollBarWheel.apply(null,arguments)}}},[n("v-menu",{attrs:{"open-on-hover":"",top:"","offset-y":"","nudge-top":"3"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[n("v-btn",t._g(t._b({attrs:{icon:"",color:"white"},on:{click:function(e){t.muted=!t.muted}}},"v-btn",r,!1),o),[n("v-icon",{attrs:{dark:""}},[t._v(t._s(t.icon))])],1),t._v(" "),n("span",[t._v(t._s(t.volume)+"%")])]}}],null,!1,3070573750)},[t._v(" "),n("div",{staticClass:"slider",on:{wheel:function(e){return e.preventDefault(),t.scrollBarWheel.apply(null,arguments)}}},[n("v-slider",{staticClass:"audio-slider",attrs:{vertical:""},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1)])],1),t._v(" "),t.mobile?n("div",{staticClass:"info"},[n("span",[t._v(t._s(t.singerName)+" - "+t._s(t.songName))])]):t._e(),t._v(" "),n("div",{staticClass:"time-slider"},[n("div",{staticClass:"mt-2"},[t.mobile?t._e():n("span",[t._v(t._s(t.songName))]),t._v(" "),t.mobile?n("v-btn",{staticClass:"ml-4",attrs:{fab:"",icon:"",color:"white"},on:{click:t.play}},[n("v-icon",{attrs:{dark:""}},[t._v("\n          "+t._s(t.playIcon)+"\n        ")])],1):t._e(),t._v(" "),n("span",{staticClass:"float-right mr-5 mt-5"},[t._v(t._s(t.fmtTime(t.sliderTime))+"/"+t._s(t.fmtTime(t.maxTime)))])],1),t._v(" "),t.mobile?t._e():n("div",[n("v-slider",{attrs:{max:t.maxTime},on:{mousedown:function(e){t.mousedown=!0},mouseup:t.setTime},model:{value:t.sliderTime,callback:function(e){t.sliderTime=e},expression:"sliderTime"}})],1)]),t._v(" "),t.mobile?n("div",{staticClass:"mx-5 mt-2"},[n("v-slider",{attrs:{max:t.maxTime},on:{mousedown:function(e){t.mousedown=!0},mouseup:t.setTime},model:{value:t.sliderTime,callback:function(e){t.sliderTime=e},expression:"sliderTime"}})],1):t._e(),t._v(" "),n("audio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"audio",attrs:{src:t.songSrc,autoplay:t.autoplay,loop:t.repeat,preload:"auto"},on:{play:t.onPlay,error:t.onError,waiting:t.onWaiting,pause:t.onPause,timeupdate:t.onTimeupdate,loadedmetadata:t.onLoadedmetadata,ended:t.OnEnded,canplay:t.canPlay}})])}),[],!1,null,"202820b4",null);e.default=component.exports;c()(component,{VAvatar:d.a,VBtn:m.a,VIcon:f.a,VMenu:v.a,VSlider:h.a})},547:function(t,e,n){"use strict";n(532)},548:function(t,e,n){var o=n(13)(!1);o.push([t.i,'.vol[data-v-202820b4]{width:36px}.slider[data-v-202820b4]{background-color:rgba(0,0,0,.9)}.audio-slider[data-v-202820b4]{height:200px;scrollbar-width:none;-ms-overflow-style:none;overflow-x:hidden;overflow-y:auto}.audio-slider[data-v-202820b4]::-webkit-scrollbar{display:none}.info[data-v-202820b4]{padding:5px;min-height:80px}img[data-v-202820b4]:after{content:" ";display:block;position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;background:url(https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/%E5%9B%BA%E5%AE%9A2.jpg);background-size:100% 100%}',""]),t.exports=o},555:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c}));n(24);function o(t){return!!/MicroMessenger/i.test(t)}function r(t){return!!/Weibo/i.test(t)}function l(t){return!!/QQ/i.test(t)}function c(t){return function(t){return!!/(Android|webOS|iPhone|iPod|tablet|BlackBerry|Mobile)/i.test(t)}(t)?function(t){return!!/iPhone|iPad|iPod/i.test(t)}(t)?o(t)?{type:"ios",env:"wechat",masklayer:!0}:r(t)?{type:"ios",env:"weibo",masklayer:!0}:l(t)?{type:"ios",env:"qq",masklayer:!0}:{type:"ios"}:function(t){return!!/Android/i.test(t)}(t)?o(t)?{type:"android",env:"wechat",masklayer:!0}:r(t)?{type:"android",env:"weibo",masklayer:!0}:l(t)?{type:"android",env:"qq",masklayer:!0}:{type:"android"}:{type:"mobile"}:{type:"pc"}}},577:function(t,e,n){var content=n(627);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(14).default)("05c0e8e9",content,!0,{sourceMap:!1})},626:function(t,e,n){"use strict";n(577)},627:function(t,e,n){var o=n(13)(!1);o.push([t.i,'.player[data-v-0deb9f2c]{position:absolute;right:0;left:0;top:10px;z-index:20}.main-app[data-v-0deb9f2c],.player[data-v-0deb9f2c]{color:#fff;background-color:rgba(0,0,0,.9)}img[data-v-0deb9f2c]{height:200px;width:200px}img[data-v-0deb9f2c]:after{content:" ";display:block;position:absolute;z-index:0;top:0;left:0;width:100%;height:100%;background:url(https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/%E5%9B%BA%E5%AE%9A2.jpg);background-size:100% 100%}',""]),t.exports=o},657:function(t,e,n){"use strict";n.r(e);n(24),n(68),n(27),n(72),n(45);var o=n(529),r=n.n(o),l=n(544),c=n(555),d={layout:"none",components:{MusicPlayer:l.default},validate:function(t){var e=t.params;return/^\d+$/.test(e.id)},asyncData:function(t){var e,n=t.params,o=t.$axios,r=(t.req,t.redirect);e=navigator.userAgent;var dt=Object(c.a)(e),l="pc"!==dt.type;return l||r("/song/".concat(n.id)),o.post("/getSongDetail",{songId:parseInt(n.id)}).then((function(data){return data.lyrics=data.lyric.split("\n"),data.mobile=l,data.dt=dt,data}))},data:function(){return{listenUrl:void 0,mobile:!1,appUrl:"https://qianxun666.com/download",appQR:""}},computed:{singerImg:function(){var t=(this.singerName||"").split("、"),e=this.pic;return t.length>2||0===t.length?"https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/固定2.jpg":e?"https://cdn.jsdelivr.net/gh/qianxun666/".concat(e,"@master/").concat(t[0].trim(),"2.jpg"):"https://cdn.jsdelivr.net/gh/qianxun666/singer-img@master/".concat(t[0].trim(),"2.jpg")}},created:function(){},mounted:function(){this.calcAppQR()},methods:{calcAppQR:function(){var t=this;this.appUrl&&r.a.toDataURL(this.appUrl).then((function(e){t.appQR=e})).catch((function(t){console.error(t)}))},download:function(){window.open(this.appUrl)},canPlay:function(t){var e=this;setTimeout((function(){e.$refs.player.play()}),300)}}},m=(n(626),n(32)),f=n(58),v=n.n(f),h=n(504),y=n(512),_=n(514),w=n(505),x=n(506),component=Object(m.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",{staticClass:"main-app"},[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("client-only",[n("div",{staticClass:"player"},[n("music-player",{ref:"player",attrs:{"song-name":t.songName,"singer-name":t.singerName,"singer-pic":t.singerImg,src:t.listenUrl,mobile:t.mobile},on:{"can-play":t.canPlay}})],1),t._v(" "),n("v-row",{attrs:{align:"center","align-content":"center",justify:"center"}},["android"===t.dt.type?n("div",{staticClass:"text-center"},[n("div",{staticClass:"mt-15"},[n("img",{attrs:{alt:"APP 下载",src:t.appQR}})]),t._v(" "),n("v-btn",{attrs:{"x-large":"",color:"primary"},on:{click:t.download}},[t._v("\n              下载 APP\n            ")])],1):t._e()])],1)],1)],1)],1)}),[],!1,null,"0deb9f2c",null);e.default=component.exports;v()(component,{MusicPlayer:n(544).default}),v()(component,{VApp:h.a,VBtn:y.a,VContainer:_.a,VMain:w.a,VRow:x.a})}}]);